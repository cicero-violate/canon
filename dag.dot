digraph Level7AI {

    rankdir=LR;
    compound=true;

    node [shape=box, style=rounded];

    ExternalWorld [label="External World"];
    Intent [label="External Intent It"];
    Planner [label="Planner (LLM / Heuristics)"];
    Judgment [label="Judgment (Radius + Policy + Proof)"];
    Reject [label="Reject", shape=diamond];
    Executor [label="Executor (Pure State Transition)"];
    Delta [label="Delta Dt"];
    Memory [label="Memory Engine (Append Only Ledger)"];
    State [label="Canonical State St"];
    Hash [label="Root Hash H(St)"];
    GraphProj [label="Graph Projection (Read Only)"];
    Feedback [label="Feedback Loop"];
    Lean [label="Formal Proof System (Lean Certificate)"];

    ExternalWorld -> Intent;
    Intent -> Planner;
    Planner -> Judgment;

    Judgment -> Reject [label="Fail"];
    Judgment -> Executor [label="Accept"];

    Judgment -> Lean [label="Generate Obligation"];
    Lean -> Judgment [label="Certificate"];

    Executor -> Delta;
    Delta -> Memory [label="append"];
    Memory -> State [label="replay"];
    State -> Hash;

    State -> GraphProj;
    GraphProj -> Feedback;
    Feedback -> Planner;
}
