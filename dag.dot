digraph Level7AI {

    rankdir=LR;

    node [shape=box, style=rounded];

    ExternalWorld [label="External World"];
    Intent [label="External Intent It"];
    Planner [label="Planner (LLM / Heuristics)"];
    Judgment [label="Judgment (Radius + Policy + Proof)"];
    Reject [label="Reject", shape=diamond];

    Kernel [label="KERNEL\n(State Transition + Invariants + Hash Root)"];

    Memory [label="Memory Engine (Append Only Ledger)"];
    State [label="Canonical State St"];
    Hash [label="Root Hash H(St)"];
    GraphProj [label="Graph Projection (Read Only)"];
    Lean [label="Formal Proof System"];
    Feedback [label="Feedback Loop"];

    ExternalWorld -> Intent;
    Intent -> Planner;
    Planner -> Judgment;

    Judgment -> Reject [label="Fail"];
    Judgment -> Lean [label="Proof Obligation"];
    Lean -> Judgment [label="Certificate"];

    Judgment -> Kernel [label="Accept"];

    Kernel -> Memory [label="Delta"];
    Memory -> State [label="Replay"];
    State -> Hash;

    State -> GraphProj;
    GraphProj -> Feedback;
    Feedback -> Planner;
}
