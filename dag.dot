digraph CanonWorkspace {
    rankdir=LR;
    node [shape=box];

    // Core crates
    canon_kernel;
    canon_core;
    canon_memory;
    canon_runtime;
    canon_gpu;
    canon_proof;
    canon_proof_gate;
    canon_ir;

    host_runtime;
    host_state_controller;
    lints;
    lint_rustc;
    lint_rustc_gate;
    test_projects;

    // === Canon internal structure ===

    canon_ir -> canon_core;
    canon_memory -> canon_core;
    canon_runtime -> canon_core;
    canon_gpu -> canon_core;
    canon_proof -> canon_core;

    canon_kernel -> canon_core;

    canon_proof_gate -> canon_proof;

    // Memory substructure
    canon_memory -> canon_ir;
    canon_runtime -> canon_memory;
    canon_runtime -> canon_ir;

    canon_gpu -> canon_ir;

    canon_proof -> canon_memory;
    canon_proof -> canon_ir;

    // === Host integration ===

    canon_core -> host_runtime;
    canon_memory -> host_runtime;
    canon_runtime -> host_runtime;
    canon_proof_gate -> host_runtime;

    canon_core -> host_state_controller;

    host_state_controller -> host_runtime;

    // === Lints system ===

    lints -> lint_rustc;
    lints -> lint_rustc_gate;

    canon_core -> lints;

    // === Test projects ===

    canon_core -> test_projects;
}
