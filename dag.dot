digraph Level7AI {

    rankdir=LR;
    compound=true;
    fontsize=12;
    labelloc="t";
    label="Level-7 AI Unified Deterministic DAG";

    node [shape=box, style=rounded];

    ExternalWorld [label="External World"];
    Intent [label="External Intent I_t"];
    Planner [label="Planner\n(LLM / Heuristics)"];
    Judgment [label="Judgment\n(Radius + Policy + Proof)"];
    Reject [label="Reject", shape=diamond];
    Executor [label="Executor\n(Pure State Transition)"];
    Delta [label="Delta Î”_t"];
    Memory [label="Memory Engine\n(Append-Only Ledger)"];
    State [label="Canonical State S_t"];
    Hash [label="Root Hash H(S_t)"];
    Graph [label="Graph Projection\n(Read-Only)"];
    Feedback [label="Feedback Loop"];
    Lean [label="Formal Proof System\n(Lean Certificate)"];

    ExternalWorld -> Intent;
    Intent -> Planner;
    Planner -> Judgment;

    Judgment -> Reject [label="Fail"];
    Judgment -> Executor [label="Accept"];

    Judgment -> Lean [label="Generate Obligation"];
    Lean -> Judgment [label="Certificate"];

    Executor -> Delta;
    Delta -> Memory [label="append"];
    Memory -> State [label="replay"];
    State -> Hash;

    State -> Graph;
    Graph -> Feedback;
    Feedback -> Planner;

}
